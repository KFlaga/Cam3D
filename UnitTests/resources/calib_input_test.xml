<?xml version="1.0" encoding="utf-8"?>
<CalibrationInput>
  <ImageSize width="640" height="480" />
  <!-- all images have same size -->
  <WorkingDirectory path="../../resources/" />
  <!-- Input -->
  <!-- Id must be same as Grid number -->
  <CalibrationImages_Raw>
    <Image id="0" cam="left" path="CalibPic_Left_1_Post.png" />
    <Image id="1" cam="left" path="CalibPic_Left_2_Post.png" />
    <Image id="2" cam="left" path="CalibPic_Left_3_Post.png" />
    <Image id="3" cam="left" path="CalibPic_Left_4_Post.png" />
    <Image id="4" cam="left" path="CalibPic_Left_5_Post.png" />
    <Image id="5" cam="left" path="CalibPic_Left_6_Post.png" />
    <Image id="0" cam="right" path="CalibPic_Right_1_Post.png" />
    <Image id="1" cam="right" path="CalibPic_Right_2_Post.png" />
    <Image id="2" cam="right" path="CalibPic_Right_3_Post.png" />
    <Image id="3" cam="right" path="CalibPic_Right_4_Post.png" />
    <Image id="4" cam="right" path="CalibPic_Right_5_Post.png" />
    <Image id="5" cam="right" path="CalibPic_Right_6_Post.png" />
  </CalibrationImages_Raw>
  <!-- To input -->
  <CalibrationGrids path="Grids6.xml" />
  <PointsExtractor type="CalibShape">
    <Parameters>
      <Parameter desc="Primary point checker" id="PPC" value="Red Neighbourhood Checker">
        <Parameters>
          <Parameter desc="Red value treshold" id="RVT" value="0.25" />
          <Parameter desc="Neighboorhood radius" id="CNR" value="3" />
        </Parameters>
      </Parameter>
    </Parameters>
  </PointsExtractor>
  <CalibrationConfig>
    <Parameters>
      <Parameter desc="Max Iterations" id="ITER" value="150" />
      <Parameter desc="Linear estimation only" id="LIN" value="False" />
      <Parameter desc="Normalize points for linear estimation" id="NPL" value="True" />
      <Parameter desc="Normalize points for iterative minimalisation" id="NPI" value="False" />
      <Parameter desc="Use convarianve matrix" id="COV" value="True" />
      <Parameter desc="Minimalise skew" id="SKEW" value="True" />
      <Parameter desc="Image measurements variance in X [px]" id="VIX" value="0.25" />
      <Parameter desc="Image measurements variance in Y [px]" id="VIY" value="0.25" />
      <Parameter desc="Real measurements variance in X [mm]" id="VRX" value="1" />
      <Parameter desc="Real measurements variance in Y [mm]" id="VRY" value="1" />
      <Parameter desc="Real measurements variance in Z [mm]" id="VRZ" value="1" />
      <Parameter desc="Max iterations" id="MI" value="150" />
      <Parameter desc="Perform outliers elimination" id="ELIM" value="False" />
      <Parameter desc="Outliers elimination coeff" id="ECOEFF" value="1.3" />
    </Parameters>
  </CalibrationConfig>
  <MatchedImages>
    <Image id="0" cam="left" path="CalibPic_Left_1_Post.png" />
    <Image id="0" cam="right" path="CalibPic_Right_1_Post.png" />
  </MatchedImages>
  <CalibrationPoints_Raw>
    <PointsLeft path="calib_points_raw_left.xml" />
    <PointsRight path="calib_points_raw_right.xml" />
  </CalibrationPoints_Raw>
  <CalibrationLines_Raw>
    <LinesLeft path="calib_lines_raw_left.xml" />
    <LinesRight path="calib_lines_raw_right.xml" />
  </CalibrationLines_Raw>
  <DistortionModels>
    <ModelLeft path="dist_model_left.xml" />
    <ModelRight path="dist_model_right.xml" />
  </DistortionModels>
  <CalibrationPoints_Undistorted>
    <PointsLeft path="calib_points_undistorted_left.xml" />
    <PointsRight path="calib_points_undistorted_right.xml" />
  </CalibrationPoints_Undistorted>
  <CalibrationData path="calibration_data.xml" />
  <Rectification path="rectification.xml" />
  <MatchedImages_Undistorted>
    <Image id="0" cam="left" path="image_matched_undistorted_left_0.png" />
    <Image id="0" cam="right" path="image_matched_undistorted_right_0.png" />
  </MatchedImages_Undistorted>
  <MatchedImages_Rectified>
    <Image id="0" cam="left" path="image_matched_rectified_left_0.png" />
    <Image id="0" cam="right" path="image_matched_rectified_right_0.png" />
  </MatchedImages_Rectified>
  <ImageMatcher>
    <Parameters>
      <Parameter desc="Matching Cost Computer" id="COST" value="Census Cost Computer">
        <Parameters>
          <Parameter desc="Mask Width" id="MWR" value="6" />
          <Parameter desc="Mask Height" id="MHR" value="6" />
        </Parameters>
      </Parameter>
      <Parameter desc="Low Disparity Penalty Coeff" id="P1" value="0.02" />
      <Parameter desc="High Disparity Penalty Coeff" id="P2" value="0.04" />
      <Parameter desc="High Disparity Gradient Coeff" id="GRAD" value="0.75" />
      <Parameter desc="Maximum Disparity" id="MAXD" value="200" />
      <Parameter desc="Minimum Disparity (Negative)" id="MIND" value="10" />
      <Parameter desc="Disparity Computer" id="DISP_COMP" value="SGM Disparity Computer">
        <Parameters>
          <Parameter desc="Mean Computing Method" id="MEAN" value="Simple Average" />
          <!-- "Simple Average" or "Weighted Average" -->
          <Parameter desc="Cost Computing Method" id="COST" value="E(||d - m||) / n^2" />
          <!-- "E(||d - m||) / n^2" or "E(||d - m||^2) / n^4" or "E(||d - m||) / n*sqrt(n)" -->
        </Parameters>
      </Parameter>
    </Parameters>
  </ImageMatcher>
  <CalibrationImages_Undistorted>
    <Image id="0" cam="left" path="image_calibration_undistorted_left_0.png" />
    <Image id="0" cam="right" path="image_calibration_undistorted_right_0.png" />
    <Image id="1" cam="left" path="image_calibration_undistorted_left_1.png" />
    <Image id="1" cam="right" path="image_calibration_undistorted_right_1.png" />
    <Image id="2" cam="left" path="image_calibration_undistorted_left_2.png" />
    <Image id="2" cam="right" path="image_calibration_undistorted_right_2.png" />
    <Image id="3" cam="left" path="image_calibration_undistorted_left_3.png" />
    <Image id="3" cam="right" path="image_calibration_undistorted_right_3.png" />
    <Image id="4" cam="left" path="image_calibration_undistorted_left_4.png" />
    <Image id="4" cam="right" path="image_calibration_undistorted_right_4.png" />
    <Image id="5" cam="left" path="image_calibration_undistorted_left_5.png" />
    <Image id="5" cam="right" path="image_calibration_undistorted_right_5.png" />
  </CalibrationImages_Undistorted>
  <CalibrationImages_Rectified>
    <Image id="0" cam="left" path="image_calibration_rectified_left_0.png" />
    <Image id="0" cam="right" path="image_calibration_rectified_right_0.png" />
    <Image id="1" cam="left" path="image_calibration_rectified_left_1.png" />
    <Image id="1" cam="right" path="image_calibration_rectified_right_1.png" />
    <Image id="2" cam="left" path="image_calibration_rectified_left_2.png" />
    <Image id="2" cam="right" path="image_calibration_rectified_right_2.png" />
    <Image id="3" cam="left" path="image_calibration_rectified_left_3.png" />
    <Image id="3" cam="right" path="image_calibration_rectified_right_3.png" />
    <Image id="4" cam="left" path="image_calibration_rectified_left_4.png" />
    <Image id="4" cam="right" path="image_calibration_rectified_right_4.png" />
    <Image id="5" cam="left" path="image_calibration_rectified_left_5.png" />
    <Image id="5" cam="right" path="image_calibration_rectified_right_5.png" />
  </CalibrationImages_Rectified>
  <DisparityMaps_Raw_Left>
    <Map path="map_raw_left_0.xml" id="0" />
  </DisparityMaps_Raw_Left>
  <DisparityMaps_Raw_Right>
    <Map path="map_raw_right_0.xml" id="0" />
  </DisparityMaps_Raw_Right>
  <DisparityRefinement>
    <Refiner name="LimitRangeRefiner">
      <Parameter desc="Left Max Disparity X" id="MAX_LEFT_X" value="0" />
      <Parameter desc="Left Min Disparity X" id="MIN_LEFT_X" value="-60" />
      <Parameter desc="Left Max Disparity Y" id="MAX_LEFT_Y" value="10" />
      <Parameter desc="Left Min Disparity Y" id="MIN_LEFT_Y" value="-10" />
      <Parameter desc="Right Max Disparity X" id="MAX_RIGHT_X" value="60" />
      <Parameter desc="Right Min Disparity X" id="MIN_RIGHT_X" value="0" />
      <Parameter desc="Right Max Disparity Y" id="MAX_RIGHT_Y" value="10" />
      <Parameter desc="Right Min Disparity Y" id="MIN_RIGHT_Y" value="-10" />
    </Refiner>
    <Refiner name="InvalidateLowConfidenceRefiner">
      <Parameter desc="Minimum Confidence" id="CONF_TRESH" value="0.5" />
    </Refiner>
    <Refiner name="PeakRemovalRefiner">
      <Parameter desc="Max Disparity Difference Within Segment" id="DIFF" value="2.0" />
      <Parameter desc="Min Segment Size" id="SEG" value="6" />
      <Parameter desc="Interpolate Invalidated Segments" id="INT" value="true" />
    </Refiner>
    <Refiner name="MedianFilterRefiner">
    </Refiner>
    <Refiner name="CrossCheckRefiner">
      <Parameter desc="Max Disparity Difference (Squared)" id="DIFF" value="2.0" />
    </Refiner>
    <Refiner name="AnisotopicDiffusionRefiner">
      <Parameter desc="Interations" id="ITERS" value="20" />
      <Parameter desc="Smooth Disparity Map?" id="SMOOTH" value="false" />
      <Parameter desc="Kernel Coeff" id="KER_COEFF" value="0.5" />
      <Parameter desc="Step Coeff" id="STEP_COEFF" value="0.5" />
      <Parameter desc="Spatial Kernel Type" id="KER_TYPE" value="Gaussian" /> <!-- Gaussian, Rational or Constant -->
      <Parameter desc="Use 8 Gradient Directions" id="EIGHT" value="false" />
    </Refiner>
  </DisparityRefinement>
  <DisparityMaps_Refined>
    <Map id="0" path="map_refined_left_0.xml" />
  </DisparityMaps_Refined>
</CalibrationInput>